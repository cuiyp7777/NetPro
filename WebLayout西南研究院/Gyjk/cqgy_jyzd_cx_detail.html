<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>采气工艺-积液诊断查询</title>
    <link href="../css/bodyCss.css" rel="stylesheet" />
    <script src="../Scripts/bodyJs.js"></script>
    <script src="../Scripts/echarts/echarts.js"></script>
    <script src="../Scripts/echarts/shine.js" type="text/javascript"></script>
</head>
<body>
    <div id="toolBar">
        <div class="container-fluid">
            <div class="row" style="background-color: white; padding-top: 9px;">
                <div class="col-sm-12 col-lg-6">
                    <div class="form-inline" style="text-align: left;">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon" style="background-color: #f5f5f5"><i class="fa fa-share-alt-square" style="color: #286090"></i>&nbsp;&nbsp;井号:</div>
                                <input id="paramGCMC" type="text" class="form-control" style="width: 150px;" name="search" placeholder="高庙33-11HF">
                            </div>
                            <label for="exampleInputName2">日期：</label>
                            <input id="dd" type="text" class="easyui-datebox" style="height: 30px; width: 100px;" value="2018-01-01">
                            <label for="exampleInputName2">-</label>
                            <input id="Text1" type="text" class="easyui-datebox" style="height: 30px; width: 100px;" value="2018-01-20">
                        </div>
                        <div class="form-group">
                            <div class="dataOpBtns">
                                <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search'">查询</a>
                                <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-save'">导出报表</a>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="dataOpBtns">
                                <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-edit'" onclick="javascript:addSet()">设置</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-6">
                    <div class="form-group">
                        <div class="form-inline" style="text-align: left; margin-left: 30px;">
                            <div class="input-group">
                                <div class="input-group-addon" style="background-color: #f5f5f5"><i class="fa fa-share-alt-square" style="color: #286090"></i>&nbsp;&nbsp;井号</div>
                                <input type="text" class="form-control" style="width: 80px;" name="search" value="高庙33-11HF" />
                                <input type="text" class="form-control" style="width: 110px;" name="search" placeholder="层位" value="" />
                                <input type="text" class="form-control" style="width: 110px;" name="search" placeholder="产生深度" value="" />
                                <input type="text" class="form-control" style="width: 110px;" name="search" placeholder="油/套管内径" value="" />
                                <input type="text" class="form-control" style="width: 110px;" name="search" placeholder="油管底界" value="" />
                                <input type="text" class="form-control" style="width: 110px;" name="search" placeholder="油套连接位置" value="" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row" style="background-color: white; padding-top: 9px;">
            <div class="col-lg-6">
                <table id="_datagrid" style="width: 800px; height: 650px"></table>
            </div>
            <div class="col-lg-6">
                <div id="main" style="height: 400px; width: 800px;"></div>
            </div>
        </div>

    </div>
    <script>
        $(function () {
            createTable();
            $('#_datagrid').datagrid({
                data: [
                    { COL1: '2018-05-08 08:30:00', COL2: '6', COL3: '8', COL4: '2', COL5: '10', COL6: '1500', COL7: '--', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:29:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:29:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:28:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:28:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:27:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:27:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:26:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:26:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:25:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:25:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:24:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:24:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:23:30', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' },
                    { COL1: '2018-05-08 08:23:00', COL2: '', COL3: '', COL4: '', COL5: '', COL6: '', COL7: '', COL8: '段塞流' }
                ]
             , onDblClickRow: function (index, row) {
                 add();
             }
            });
        })
        function createTable() {
            $('#_datagrid').datagrid({
                url: '',
                idField: 'ID',
                rownumbers: true,
                border: 1,
                fit: false,
                fitColumns: true,
                singleSelect: true,
                pageSize: 30,
                remoteFilter: true,
                striped: true,
                pagination: true,
                frozenColumns: [[
                    { title: '日期', field: 'COL1', width: 150, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                ]],
                columns: [[
                    { title: '油压<br>Mpa', field: 'COL2', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                    { title: '套压<br>Mpa', field: 'COL3', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                    { title: '产气量<br>10<sup>4</sup>m<sup>3</sup>/d', field: 'COL4', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                    { title: '产水量<br>m<sup>3</sup>/d', field: 'COL5', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                    { title: '环空液面<br>m', field: 'COL6', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                    { title: '油管液面<br>m', field: 'COL7', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' },
                    { title: '流态识别', field: 'COL8', width: 70, rowspan: 1, colspan: 1, halign: 'center', align: 'center' }
                ]],
                onLoadSuccess: function (data) { }
            });
        }
        function addSet() {
            openDialog("参数设置", $('body').width() * 0.98, $('body').height() * 0.95, "../Gyjk/cqgy_jyzd_cx_set.html");
        }
        //补齐长度
        function PrefixInteger(num, n) {
            return (Array(n).join(0) + num).slice(-n);
        }
    </script>
    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('main'), 'shine');
        var option = {
            title: {
                text: '液面深度',
                subtext: '米'
            },
            color: ['red', 'green'],
            tooltip: {
                trigger: 'axis',
                textStyle: {
                    formatter: 'parseInt({value})'
                }
            },
            grid: {
                left: 6,
                top: 60,
                right: 20,
                bottom: 20,
                containLabel: true
            },
            legend: {
                data: ['油管液面深度', '环空液面深度']
            },
            toolbox: {
                show: true,
                feature: {
                    dataZoom: {
                        yAxisIndex: 'none'
                    },
                    dataView: {
                        readOnly: false
                    },
                    magicType: {
                        type: ['line', 'bar']
                    },
                    restore: {},
                    saveAsImage: {}
                }
            },

            xAxis: {
                type: 'category',
                boundaryGap: false,
                axisLabel:{ interval: 0},
                data: [
                    '2018-05-08 \n08:30:00', '2018-05-08 \n08:30:30', '2018-05-08 \n08:31:00', '2018-05-08 \n08:31:30',
                    '2018-05-08 \n08:32:00', '2018-05-08 \n08:33:30', '2018-05-08 \n08:34:00', '2018-05-08 \n08:34:30',
                    '2018-05-08 \n08:35:00', '2018-05-08 \n08:35:30']
            },

            yAxis: {
                type: 'value',
                boundaryGap: [0, 0.1],
            },

            series: [{
                name: '油管液面深度',
                type: 'line',
                z: 10,
                type: 'line',
                data: [1210, 1230, 1230, 1290, 1230, 1230, 1260, 1230, 1230, 1260]
            },
            {
                name: '环空液面深度',
                type: 'line',
                data: [1400, 1450, 1480, 1410, 1470, 1470, 1450, 1470, 1470, 1450]
            }
            ]
        };


        var x_time = new Date('05/08/2018 08:35:30');
        // 循环控制数据
        setInterval(function () {
            var myDate = new Date();
            var a = x_time.valueOf() + 30 * 1000
            a = new Date(a)
            x_time = a;
            var xATime = [a.getFullYear(), PrefixInteger(a.getMonth() + 1, 2), PrefixInteger(a.getDate(), 2)].join('-') + "\n "
                + [PrefixInteger(a.getHours(), 2), PrefixInteger(a.getMinutes(), 2), PrefixInteger(a.getSeconds(), 2)].join(':');
            //x轴
            option.xAxis.data.shift();
            //option.xAxis.data.push('第' + i + '天');
            option.xAxis.data.push(xATime);

            //油管液面深度
            option.series[0].data.shift();
            option.series[0].data.push(parseInt(Math.random() * (1400 - 1200 + 1) + 1200, 10));
            //环空液面深度
            option.series[1].data.shift();
            option.series[1].data.push(parseInt(Math.random() * (1500 - 1400 + 1) + 1400, 10));
            myChart.setOption(option);


        }, 2000)

        myChart.setOption(option);
    </script>
</body>
</html>
